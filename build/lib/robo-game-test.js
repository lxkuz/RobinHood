// Generated by CoffeeScript 1.10.0
(function() {
  var RoboGameTest;

  RoboGameTest = function(title, robot, gameData, puts) {
    var credit, el, funds, i, len, message, money, profit;
    if (puts == null) {
      puts = false;
    }
    if (puts) {
      console.log("------------- " + title + " -------------");
    }
    money = robot.money;
    credit = 0;
    for (i = 0, len = gameData.length; i < len; i++) {
      el = gameData[i];
      robot.play(el);
    }
    funds = robot.funds();
    if (funds.betsCount > 0) {
      if (gameData[gameData.length - 1].win) {
        if (puts) {
          console.log("P1 win");
        }
        profit = funds.p1;
      } else {
        if (puts) {
          console.log("P2 win");
        }
        profit = funds.p2;
      }
      if (puts) {
        console.log("profit: " + profit);
      }
      robot.money += profit;
      if (robot.money < robot.bet) {
        if (puts) {
          console.log("LOST ALL MONEY!");
        }
      }
      robot.stop();
    }
    message = title + ": " + (parseInt(robot.money - credit)) + ", " + (parseInt(((robot.money - money - credit) / money) * 100)) + "%, credit: " + credit;
    return console.log(message);
  };

  module.exports = RoboGameTest;

}).call(this);
